<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Maker</title>
</head>

<body>


    <div id="resumeMakerApp"
        style="max-width:900px;margin:auto;font-family:system-ui;background:#fff7e6;padding:20px;border-radius:16px;border:1px solid #f3c26b;">

        <h1 style="text-align:center;color:#b35a00;">Resume Maker â€“ Programmer's Picnic</h1>

        <!-- THEME + TEMPLATE + ATS -->
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px;">
            <select id="themeSelect" class="rm-input">
                <option value="saffron">Saffron (Default)</option>
                <option value="blue">Blue</option>
                <option value="dark">Dark</option>
            </select>

            <select id="templateSelect" class="rm-input">
                <option value="modern">Modern Template</option>
                <option value="minimal">Minimal Template</option>
                <option value="creative">Creative Template</option>
                <option value="ultra">Ultra-Modern Template</option>
            </select>

            <label style="display:flex;align-items:center;gap:6px;">
                <input type="checkbox" id="atsMode"> ATS-Friendly Mode
            </label>
        </div>

        <!-- AUTO SKILL SUGGEST -->
        <label>Select Your Role for Auto Skill Suggestions</label>
        <select id="roleSelect" class="rm-input">
            <option value="">Select Role</option>
            <option value="python">Python Developer</option>
            <option value="java">Java Developer</option>
            <option value="frontend">Frontend Developer</option>
            <option value="backend">Backend Developer</option>
            <option value="fullstack">Full Stack Developer</option>
            <option value="ml">Machine Learning Engineer</option>
            <option value="data">Data Analyst</option>
        </select>
        <button id="autoSkillBtn" class="rm-btn">Add Suggested Skills</button>

        <!-- PHOTO UPLOAD -->
        <label>Upload Photo (Optional)</label>
        <input type="file" id="photoInput" accept="image/*" class="rm-input">

        <!-- FORM FIELDS -->
        <div id="resumeForm" style="background:#fffaf0;padding:15px;border-radius:12px;border:1px solid #f1b14b;">
            <h3 style="color:#8c3f00;margin-top:0;">Fill Your Details</h3>

            <label>Full Name</label>
            <input type="text" id="name" class="rm-input">

            <label>Email</label>
            <input type="text" id="email" class="rm-input">

            <label>Phone</label>
            <input type="text" id="phone" class="rm-input">

            <label>Location</label>
            <input type="text" id="location" class="rm-input">

            <label>LinkedIn URL</label>
            <input type="text" id="linkedin" class="rm-input">

            <label>Portfolio / GitHub</label>
            <input type="text" id="portfolio" class="rm-input">

            <label>Career Objective</label>
            <textarea id="objective" class="rm-input"></textarea>

            <label>Skills (comma separated)</label>
            <input type="text" id="skills" class="rm-input">

            <label>Education</label>
            <textarea id="education" class="rm-input"></textarea>

            <label>Projects</label>
            <textarea id="projects" class="rm-input"></textarea>

            <label>Experience</label>
            <textarea id="experience" class="rm-input"></textarea>

            <button id="generateBtn" class="rm-btn">Generate Resume</button>
            <button id="saveJsonBtn" class="rm-btn">Save as JSON</button>

            <input type="file" id="loadJsonInput" style="display:none;">
            <button id="loadJsonBtn" class="rm-btn">Load JSON</button>
        </div>

        <!-- OUTPUT -->
        <div id="resumeOutput"
            style="display:none;margin-top:20px;background:white;padding:20px;border-radius:12px;border:1px solid #e9c48f;">
            <div id="resumeContent"></div>
            <button class="rm-btn" onclick="window.print()">Download PDF</button>
        </div>

    </div>

    <!-- ============================= -->
    <!--             CSS               -->
    <!-- ============================= -->
    <style>
        .rm-input {
            width: 100%;
            padding: 8px;
            margin: 6px 0 12px;
            border-radius: 8px;
            border: 1px solid #f3c26b;
            background: #fff;
        }

        .rm-btn {
            background: #ffcc73;
            border: 1px solid #b57400;
            padding: 10px 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }

        .rm-btn:hover {
            background: #ffdb9b;
        }

        .resume-photo {
            width: 120px;
            height: 120px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid #ccc;
        }

        .resume-section-title {
            font-size: 1.2rem;
            margin-top: 20px;
            border-bottom: 2px solid #ccc;
            padding-bottom: 3px;
            font-weight: 600;
        }

        /* THEMES */
        .theme-saffron {
            color: #3a2a1a;
        }

        .theme-blue {
            color: #1e3a8a;
        }

        .theme-dark {
            background: #111;
            color: white !important;
        }

        /* ATS MODE */
        .ats * {
            background: white !important;
            color: #000 !important;
            border: none !important;
            box-shadow: none !important;
        }
    </style>

    <!-- ============================= -->
    <!--         JAVASCRIPT            -->
    <!-- ============================= -->
    <script>
        let uploadedPhoto = "";

        // Photo Upload
        document.getElementById("photoInput").onchange = function (e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = () => uploadedPhoto = reader.result;
                reader.readAsDataURL(file);
            }
        };

        // Auto Skill Suggestions
        const autoSkills = {
            python: "Python, Flask, Django, NumPy, Pandas, REST API, Git, SQL, OOP",
            java: "Java, Spring Boot, Hibernate, JSP, Servlets, MySQL, Git, REST API",
            frontend: "HTML, CSS, JavaScript, React, Vue, Tailwind, Git, Responsive Design",
            backend: "Node.js, Express.js, MongoDB, SQL, REST API, Authentication, Git",
            fullstack: "HTML, CSS, JS, React, Node.js, Express.js, MongoDB, Git, APIs",
            ml: "Python, NumPy, Pandas, Scikit-Learn, TensorFlow, ML Models, Data Cleaning",
            data: "Excel, SQL, Python, Pandas, Power BI, Tableau, Data Visualization"
        };

        document.getElementById("autoSkillBtn").onclick = function () {
            const role = document.getElementById("roleSelect").value;
            if (role && autoSkills[role]) {
                let curr = document.getElementById("skills").value;
                document.getElementById("skills").value =
                    curr ? curr + ", " + autoSkills[role] : autoSkills[role];
            }
        };

        // Save JSON
        document.getElementById("saveJsonBtn").onclick = function () {
            const data = JSON.stringify(collectData());
            const blob = new Blob([data], { type: "application/json" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "resume.json";
            a.click();
        };

        // Load JSON
        document.getElementById("loadJsonBtn").onclick = () =>
            document.getElementById("loadJsonInput").click();

        document.getElementById("loadJsonInput").onchange = function (e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = () => fillForm(JSON.parse(reader.result));
            reader.readAsText(file);
        };

        // Generate Resume
        document.getElementById("generateBtn").onclick = () => {
            renderResume(collectData());
        };

        function collectData() {
            return {
                name: val("name"),
                email: val("email"),
                phone: val("phone"),
                location: val("location"),
                linkedin: val("linkedin"),
                portfolio: val("portfolio"),
                objective: val("objective"),
                skills: val("skills"),
                education: val("education"),
                projects: val("projects"),
                experience: val("experience"),
                theme: document.getElementById("themeSelect").value,
                template: document.getElementById("templateSelect").value,
                ats: document.getElementById("atsMode").checked,
                photo: uploadedPhoto
            };
        }

        function fillForm(d) {
            for (let k in d) {
                if (document.getElementById(k)) {
                    document.getElementById(k).value = d[k];
                }
            }
            uploadedPhoto = d.photo;
        }

        // TEMPLATE RENDERING
        function renderResume(d) {
            const skillsArr = d.skills.split(",").map(s => s.trim());

            let header = `
        <div style="text-align:center;">
            ${d.photo ? `<img src="${d.photo}" class="resume-photo"><br>` : ""}
            <h1>${d.name}</h1>
            <p>${d.email} | ${d.phone} | ${d.location}<br>
               <a href="${d.linkedin}">${d.linkedin}</a> |
               <a href="${d.portfolio}">${d.portfolio}</a>
            </p>
        </div>`;

            let sections = `
        <div class="resume-section-title">Career Objective</div><p>${d.objective}</p>
        <div class="resume-section-title">Skills</div><ul>${skillsArr.map(s => `<li>${s}</li>`).join("")}</ul>
        <div class="resume-section-title">Education</div><p>${d.education.replace(/\n/g, "<br>")}</p>
        <div class="resume-section-title">Projects</div><p>${d.projects.replace(/\n/g, "<br>")}</p>
        <div class="resume-section-title">Experience</div><p>${d.experience.replace(/\n/g, "<br>")}</p>
    `;

            // Template variations
            if (d.template === "minimal") {
                header = `<h1 style="text-align:left;">${d.name}</h1>
                  <p>${d.email} | ${d.phone} | ${d.location}</p>`;
            }

            if (d.template === "creative") {
                header = `<div style="background:#ffe7b3;padding:15px;border-radius:10px;text-align:center;">
                    ${d.photo ? `<img src="${d.photo}" class="resume-photo"><br>` : ""}
                    <h1 style="color:#b35a00;">${d.name}</h1>
                  </div>`;
            }

            if (d.template === "ultra") {
                header = `<div style="display:flex;align-items:center;gap:20px;">
                    ${d.photo ? `<img src="${d.photo}" class="resume-photo">` : ""}
                    <div>
                      <h1>${d.name}</h1>
                      <p>${d.email}<br>${d.phone}<br>${d.location}</p>
                    </div>
                  </div>`;
            }

            // Apply Theme
            const themeClass = {
                saffron: "theme-saffron",
                blue: "theme-blue",
                dark: "theme-dark"
            }[d.theme];

            document.getElementById("resumeContent").innerHTML =
                `<div class="${themeClass} ${d.ats ? 'ats' : ''}">
            ${header + sections}
        </div>`;

            document.getElementById("resumeOutput").style.display = "block";
        }

        function val(id) { return document.getElementById(id).value.trim(); }
    </script>
</body>

</html>